(()=>{var e={738:(e,n,t)=>{const r=t(647),o=t(520),a=t(66);function s(e){console.log(`[dotenv][DEBUG] ${e}`)}const i=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,c=/\\n/g,d=/\r\n|\n|\r/;function l(e,n){const t=Boolean(n&&n.debug),r={};return e.toString().split(d).forEach((function(e,n){const o=e.match(i);if(null!=o){const e=o[1];let n=o[2]||"";const t=n.length-1,a='"'===n[0]&&'"'===n[t];"'"===n[0]&&"'"===n[t]||a?(n=n.substring(1,t),a&&(n=n.replace(c,"\n"))):n=n.trim(),r[e]=n}else t&&s(`did not match key and value when parsing line ${n+1}: ${e}`)})),r}e.exports.config=function(e){let n=o.resolve(process.cwd(),".env"),t="utf8",i=!1;var c;e&&(null!=e.path&&(n="~"===(c=e.path)[0]?o.join(a.homedir(),c.slice(1)):c),null!=e.encoding&&(t=e.encoding),null!=e.debug&&(i=!0));try{const e=l(r.readFileSync(n,{encoding:t}),{debug:i});return Object.keys(e).forEach((function(n){Object.prototype.hasOwnProperty.call(process.env,n)?i&&s(`"${n}" is already defined in \`process.env\` and will not be overwritten`):process.env[n]=e[n]})),{parsed:e}}catch(e){return{error:e}}},e.exports.parse=l},614:(e,n,t)=>{"use strict";var r;t.r(n),t.d(n,{NIL:()=>J,parse:()=>h,stringify:()=>l,v1:()=>y,v3:()=>C,v4:()=>T,v5:()=>A,validate:()=>i,version:()=>U});var o=new Uint8Array(16);function a(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,i=function(e){return"string"==typeof e&&s.test(e)};for(var c=[],d=0;d<256;++d)c.push((d+256).toString(16).substr(1));const l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(c[e[n+0]]+c[e[n+1]]+c[e[n+2]]+c[e[n+3]]+"-"+c[e[n+4]]+c[e[n+5]]+"-"+c[e[n+6]]+c[e[n+7]]+"-"+c[e[n+8]]+c[e[n+9]]+"-"+c[e[n+10]]+c[e[n+11]]+c[e[n+12]]+c[e[n+13]]+c[e[n+14]]+c[e[n+15]]).toLowerCase();if(!i(t))throw TypeError("Stringified UUID is invalid");return t};var p,u,f=0,g=0;const y=function(e,n,t){var r=n&&t||0,o=n||new Array(16),s=(e=e||{}).node||p,i=void 0!==e.clockseq?e.clockseq:u;if(null==s||null==i){var c=e.random||(e.rng||a)();null==s&&(s=p=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==i&&(i=u=16383&(c[6]<<8|c[7]))}var d=void 0!==e.msecs?e.msecs:Date.now(),y=void 0!==e.nsecs?e.nsecs:g+1,h=d-f+(y-g)/1e4;if(h<0&&void 0===e.clockseq&&(i=i+1&16383),(h<0||d>f)&&void 0===e.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=d,g=y,u=i;var v=(1e4*(268435455&(d+=122192928e5))+y)%4294967296;o[r++]=v>>>24&255,o[r++]=v>>>16&255,o[r++]=v>>>8&255,o[r++]=255&v;var m=d/4294967296*1e4&268435455;o[r++]=m>>>8&255,o[r++]=255&m,o[r++]=m>>>24&15|16,o[r++]=m>>>16&255,o[r++]=i>>>8|128,o[r++]=255&i;for(var w=0;w<6;++w)o[r+w]=s[w];return n||l(o)},h=function(e){if(!i(e))throw TypeError("Invalid UUID");var n,t=new Uint8Array(16);return t[0]=(n=parseInt(e.slice(0,8),16))>>>24,t[1]=n>>>16&255,t[2]=n>>>8&255,t[3]=255&n,t[4]=(n=parseInt(e.slice(9,13),16))>>>8,t[5]=255&n,t[6]=(n=parseInt(e.slice(14,18),16))>>>8,t[7]=255&n,t[8]=(n=parseInt(e.slice(19,23),16))>>>8,t[9]=255&n,t[10]=(n=parseInt(e.slice(24,36),16))/1099511627776&255,t[11]=n/4294967296&255,t[12]=n>>>24&255,t[13]=n>>>16&255,t[14]=n>>>8&255,t[15]=255&n,t};function v(e,n,t){function r(e,r,o,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var n=[],t=0;t<e.length;++t)n.push(e.charCodeAt(t));return n}(e)),"string"==typeof r&&(r=h(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(r),s.set(e,r.length),(s=t(s))[6]=15&s[6]|n,s[8]=63&s[8]|128,o){a=a||0;for(var i=0;i<16;++i)o[a+i]=s[i];return o}return l(s)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function m(e){return 14+(e+64>>>9<<4)+1}function w(e,n){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t}function b(e,n,t,r,o,a){return w((s=w(w(n,e),w(r,a)))<<(i=o)|s>>>32-i,t);var s,i}function P(e,n,t,r,o,a,s){return b(n&t|~n&r,e,n,o,a,s)}function S(e,n,t,r,o,a,s){return b(n&r|t&~r,e,n,o,a,s)}function O(e,n,t,r,o,a,s){return b(n^t^r,e,n,o,a,s)}function j(e,n,t,r,o,a,s){return b(t^(n|~r),e,n,o,a,s)}const C=v("v3",48,(function(e){if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=new Uint8Array(n.length);for(var t=0;t<n.length;++t)e[t]=n.charCodeAt(t)}return function(e){for(var n=[],t=32*e.length,r="0123456789abcdef",o=0;o<t;o+=8){var a=e[o>>5]>>>o%32&255,s=parseInt(r.charAt(a>>>4&15)+r.charAt(15&a),16);n.push(s)}return n}(function(e,n){e[n>>5]|=128<<n%32,e[m(n)-1]=n;for(var t=1732584193,r=-271733879,o=-1732584194,a=271733878,s=0;s<e.length;s+=16){var i=t,c=r,d=o,l=a;t=P(t,r,o,a,e[s],7,-680876936),a=P(a,t,r,o,e[s+1],12,-389564586),o=P(o,a,t,r,e[s+2],17,606105819),r=P(r,o,a,t,e[s+3],22,-1044525330),t=P(t,r,o,a,e[s+4],7,-176418897),a=P(a,t,r,o,e[s+5],12,1200080426),o=P(o,a,t,r,e[s+6],17,-1473231341),r=P(r,o,a,t,e[s+7],22,-45705983),t=P(t,r,o,a,e[s+8],7,1770035416),a=P(a,t,r,o,e[s+9],12,-1958414417),o=P(o,a,t,r,e[s+10],17,-42063),r=P(r,o,a,t,e[s+11],22,-1990404162),t=P(t,r,o,a,e[s+12],7,1804603682),a=P(a,t,r,o,e[s+13],12,-40341101),o=P(o,a,t,r,e[s+14],17,-1502002290),t=S(t,r=P(r,o,a,t,e[s+15],22,1236535329),o,a,e[s+1],5,-165796510),a=S(a,t,r,o,e[s+6],9,-1069501632),o=S(o,a,t,r,e[s+11],14,643717713),r=S(r,o,a,t,e[s],20,-373897302),t=S(t,r,o,a,e[s+5],5,-701558691),a=S(a,t,r,o,e[s+10],9,38016083),o=S(o,a,t,r,e[s+15],14,-660478335),r=S(r,o,a,t,e[s+4],20,-405537848),t=S(t,r,o,a,e[s+9],5,568446438),a=S(a,t,r,o,e[s+14],9,-1019803690),o=S(o,a,t,r,e[s+3],14,-187363961),r=S(r,o,a,t,e[s+8],20,1163531501),t=S(t,r,o,a,e[s+13],5,-1444681467),a=S(a,t,r,o,e[s+2],9,-51403784),o=S(o,a,t,r,e[s+7],14,1735328473),t=O(t,r=S(r,o,a,t,e[s+12],20,-1926607734),o,a,e[s+5],4,-378558),a=O(a,t,r,o,e[s+8],11,-2022574463),o=O(o,a,t,r,e[s+11],16,1839030562),r=O(r,o,a,t,e[s+14],23,-35309556),t=O(t,r,o,a,e[s+1],4,-1530992060),a=O(a,t,r,o,e[s+4],11,1272893353),o=O(o,a,t,r,e[s+7],16,-155497632),r=O(r,o,a,t,e[s+10],23,-1094730640),t=O(t,r,o,a,e[s+13],4,681279174),a=O(a,t,r,o,e[s],11,-358537222),o=O(o,a,t,r,e[s+3],16,-722521979),r=O(r,o,a,t,e[s+6],23,76029189),t=O(t,r,o,a,e[s+9],4,-640364487),a=O(a,t,r,o,e[s+12],11,-421815835),o=O(o,a,t,r,e[s+15],16,530742520),t=j(t,r=O(r,o,a,t,e[s+2],23,-995338651),o,a,e[s],6,-198630844),a=j(a,t,r,o,e[s+7],10,1126891415),o=j(o,a,t,r,e[s+14],15,-1416354905),r=j(r,o,a,t,e[s+5],21,-57434055),t=j(t,r,o,a,e[s+12],6,1700485571),a=j(a,t,r,o,e[s+3],10,-1894986606),o=j(o,a,t,r,e[s+10],15,-1051523),r=j(r,o,a,t,e[s+1],21,-2054922799),t=j(t,r,o,a,e[s+8],6,1873313359),a=j(a,t,r,o,e[s+15],10,-30611744),o=j(o,a,t,r,e[s+6],15,-1560198380),r=j(r,o,a,t,e[s+13],21,1309151649),t=j(t,r,o,a,e[s+4],6,-145523070),a=j(a,t,r,o,e[s+11],10,-1120210379),o=j(o,a,t,r,e[s+2],15,718787259),r=j(r,o,a,t,e[s+9],21,-343485551),t=w(t,i),r=w(r,c),o=w(o,d),a=w(a,l)}return[t,r,o,a]}(function(e){if(0===e.length)return[];for(var n=8*e.length,t=new Uint32Array(m(n)),r=0;r<n;r+=8)t[r>>5]|=(255&e[r/8])<<r%32;return t}(e),8*e.length))})),T=function(e,n,t){var r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var o=0;o<16;++o)n[t+o]=r[o];return n}return l(r)};function I(e,n,t,r){switch(e){case 0:return n&t^~n&r;case 1:case 3:return n^t^r;case 2:return n&t^n&r^t&r}}function N(e,n){return e<<n|e>>>32-n}const A=v("v5",80,(function(e){var n=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var o=0;o<r.length;++o)e.push(r.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,s=Math.ceil(a/16),i=new Array(s),c=0;c<s;++c){for(var d=new Uint32Array(16),l=0;l<16;++l)d[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];i[c]=d}i[s-1][14]=8*(e.length-1)/Math.pow(2,32),i[s-1][14]=Math.floor(i[s-1][14]),i[s-1][15]=8*(e.length-1)&4294967295;for(var p=0;p<s;++p){for(var u=new Uint32Array(80),f=0;f<16;++f)u[f]=i[p][f];for(var g=16;g<80;++g)u[g]=N(u[g-3]^u[g-8]^u[g-14]^u[g-16],1);for(var y=t[0],h=t[1],v=t[2],m=t[3],w=t[4],b=0;b<80;++b){var P=Math.floor(b/20),S=N(y,5)+I(P,h,v,m)+w+n[P]+u[b]>>>0;w=m,m=v,v=N(h,30)>>>0,h=y,y=S}t[0]=t[0]+y>>>0,t[1]=t[1]+h>>>0,t[2]=t[2]+v>>>0,t[3]=t[3]+m>>>0,t[4]=t[4]+w>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,255&t[0],t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,255&t[1],t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,255&t[2],t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,255&t[3],t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,255&t[4]]})),J="00000000-0000-0000-0000-000000000000",U=function(e){if(!i(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},547:(e,n,t)=>{const r=t(204),{getPostData:o,checkPerson:a}=t(263),{validate:s}=t(614);e.exports={getPersons:async(e,n)=>{try{const e=await r.findAll();n.writeHead(200,{"Content-Type":"application/json"}),n.end(JSON.stringify(e))}catch(e){console.log(e)}},getPerson:async(e,n,t)=>{try{const e=await r.findById(t);e?s(t)?(n.writeHead(200,{"Content-Type":"application/json"}),n.end(JSON.stringify(e))):(n.writeHead(400,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Person has invalid ID"}))):(n.writeHead(404,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Person not found"})))}catch(e){console.log(e)}},createPerson:async(e,n)=>{try{const t=await o(e),{name:s,age:i,hobbies:c}=JSON.parse(t),d={name:s,age:i,hobbies:c},l=a(d);if(l)n.writeHead(400,{"Content-Type":"application/json"}),n.end(JSON.stringify(l));else{const e=await r.create(d);n.writeHead(201,{"Content-Type":"application/json"}),n.end(JSON.stringify(e))}}catch(e){console.log(e)}},updatePerson:async(e,n,t)=>{try{const a=await r.findById(t);if(a||(n.writeHead(404,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Person not found"}))),s(t)){const s=await o(e),{name:i,age:c,hobbies:d}=JSON.parse(s),l={name:i||a.name,age:c||a.age,hobbies:d||a.hobbies},p=await r.update(t,l);n.writeHead(201,{"Content-Type":"application/json"}),n.end(JSON.stringify(p))}else n.writeHead(400,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Person has invalid ID"}))}catch(e){console.log(e)}},deletePerson:async(e,n,t)=>{try{await r.findById(t)||(n.writeHead(404,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Person not found"}))),s(t)?(await r.remove(t),n.writeHead(204,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:`Person ${t} deleted`}))):(n.writeHead(400,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Person has invalid ID"})))}catch(e){console.log(e)}}}},263:(e,n,t)=>{const r=t(218);e.exports={writeData:(e,n)=>{try{r.writeFileSync(e,JSON.stringify(n),"utf-8")}catch(e){console.log(e)}},getPostData:e=>new Promise(((n,t)=>{try{let t="";e.on("data",(e=>{t+=e.toString()})),e.on("end",(()=>{n(t)}))}catch(e){t(e)}})),checkPerson:e=>{const n=Object.keys(e).find((n=>!e[n]));return!!n&&`${n} field are missing `}}},204:(e,n,t)=>{let r=t(698);const{v4:o}=t(614),{writeData:a}=t(263);e.exports={findAll:()=>new Promise(((e,n)=>{e(r)})),findById:e=>new Promise(((n,t)=>{n(r.find((n=>n.id===e)))})),create:e=>new Promise(((n,t)=>{const s={id:o,...e};r.push(s),a("./src/persons.json",r),n(s)})),update:(e,n)=>new Promise(((t,o)=>{const s=r.findIndex((n=>n.id===e));r[s]={id:e,...n},a("./src/persons.json",r),t(r[s])})),remove:e=>new Promise(((n,t)=>{r=r.filter((n=>n.id!==e)),a("./src/persons.json",r),n()}))}},647:()=>{},66:()=>{},520:()=>{},218:()=>{},3:()=>{},698:e=>{"use strict";e.exports=JSON.parse('[{"id":"1","name":"Nikita","age":"23","hobbies":["Sleep","Dance","Sing"]},{"id":"2","name":"Gleb","age":"25","hobbies":["Walk","Kill","Fight"]},{"id":"3","name":"John","age":"28","hobbies":["Swim","Jam","Play"]},{"id":"4","name":"Boris","age":"80","hobbies":["Sit","Lay","Watch"]}]')}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={exports:{}};return e[r](a,a.exports,t),a.exports}t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{t(738).config();const e=t(3),{getPersons:n,getPerson:r,createPerson:o,updatePerson:a,deletePerson:s}=t(547),i=process.env.PORT||8e3;e.createServer(((e,t)=>{const i=e.url.split("/")[2];"/person"===e.url&&"GET"===e.method?n(e,t):e.url.match(/\/person\/([0-9]+)/)&&"GET"===e.method?r(e,t,i):"/person"===e.url&&"POST"===e.method?o(e,t):e.url.match(/\/person\/([0-9]+)/)&&"PUT"===e.method?a(e,t,i):e.url.match(/\/person\/([0-9]+)/)&&"DELETE"===e.method?s(e,t,i):(t.writeHeader(404,{"Content-Type":"application/json"}),t.end(JSON.stringify({message:"Person not found"})))})).listen(i,(()=>{console.log(`Server running at port:${i}/`)}))})()})();